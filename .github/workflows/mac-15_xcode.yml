name: mac-15 xcode

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  build:
    name: mac-15 xcode
    runs-on: macos-15
    steps:
      - uses: actions/checkout@v4
        with:
          repository: HDFGroup/hdf5

      - name: install
        run: brew install libaec

      - name: xcode
        run: |
          mkdir build
          cd build
          cmake -G Xcode \
          -DBUILDNAME:STRING="xcode/r" \
          -DCTEST_DROP_SITE_INIT:STRING="my.cdash.org" \
          -DSITE:STRING="mac-15" \
          ..
          ctest -T Build
          ctest -T Test
#          cmake --build . --config Debug
#          ctest --test-dir . -C Debug
#          sudo cmake -DCMAKE_INSTALL_PREFIX=/usr/local -DCMAKE_INSTALL_CONFIG_NAME=Debug -P cmake_install.cmake
