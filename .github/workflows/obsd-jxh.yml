name: obsd jxh

on:
  push:
    branches: main

jobs:
  test:
    runs-on: ubuntu-latest
    name: obsd jxh
    steps:
      - uses: actions/checkout@v4
        with:
          repository: jhendersonHDF/hdf5
          ref: feature/complex_number_support
      - name: test
        uses: cross-platform-actions/action@v0.27.0
        env:
          FOO: A
          BAR: B
        with:
          environment_variables: FOO BAR
          operating_system: openbsd
          architecture: x86_64
          version: '7.5'
          shell: bash
          run: |
            sudo pkg_add cmake
            mkdir build
            cd build
            cmake -DSITE:STRING="obsd" -DBUILDNAME:STRING="4630/r" -DCTEST_DROP_SITE_INIT:STRING="my.cdash.org" -DCTEST_DROP_LOCATION_INIT:STRING="/submit.php?project=HDF5" ..
            ctest -D Experimental -C Release
