<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HDF5: Using UTF-8 Encoding in HDF5 Applications</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hdf5doxy.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="hdf5doxy.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="hdf5_navtree_hacks.js"></script>
<div style="background:#FFDDDD;font-size:120%;text-align:center;margin:0;padding:5px">Help us improve by taking our short survey: <a href="https://www.hdfgroup.org/website-survey/">https://www.hdfgroup.org/website-survey/</a></div>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    DoxygenAwesomeTabs.init()
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-57FMZK4S7X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-57FMZK4S7X');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="HDFG-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">HDF5<span id="projectnumber">&#160;Last Updated on 2026-02-28</span>
   </div>
   <div id="projectbrief">The HDF5 Field Guide</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="_getting_started.html"><span>Getting&#160;started</span></a></li>
      <li><a href="_u_g.html"><span>User&#160;Guide</span></a></li>
      <li><a href="_r_m.html"><span>Reference&#160;Manual</span></a></li>
      <li><a href="_cookbook.html"><span>Cookbook</span></a></li>
      <li><a href="_t_n.html"><span>Technical&#160;Notes</span></a></li>
      <li><a href="_r_f_c.html"><span>RFCs</span></a></li>
      <li><a href="_s_p_e_c.html"><span>Specifications</span></a></li>
      <li><a href="_g_l_s.html"><span>Glossary</span></a></li>
      <li><a href="_f_t_s.html"><span>Full-Text&#160;Search</span></a></li>
      <li><a href="_about.html"><span>About</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_u_n_i_c_o_d_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Using UTF-8 Encoding in HDF5 Applications</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Navigate back: <a class="el" href="index.html">Main</a> / <a class="el" href="_t_n.html">Technical Notes</a> </p><hr  />
<h1><a class="anchor" id="sec_unicode_intro"></a>
Introduction</h1>
<p>Text and character data are often discussed as though text means ASCII text. We even go so far as to call a file containing only ASCII text a plain text file. This works reasonably well for English (though better for American English than British English), but what if that plain text file is in French, German, Chinese, or any of several hundred other languages? This document introduces the use of UTF-8 encoding (see note 1), enabling the use of a much more extensive and flexible character set that can faithfully represent any of those languages.</p>
<p>This document assumes a working familiarity with UTF-8 and Unicode. Any reader who is unfamiliar with UTF-8 encoding should read the <a href="https://en.wikipedia.org/wiki/UTF-8">Wikipedia UTF-8 article</a> before proceeding; it provides an excellent primer.</p>
<p>For our context, the most important UTF-8 concepts are: </p><ul>
<li>Multi-byte and variable-size character encodings </li>
<li>Limitations of the ASCII character set </li>
<li>Risks associated with the use of the term plain text </li>
<li>Representation of multiple language alphabets or characters in a single document</li>
</ul>
<p>More specific technical details will only become important if they affect the specifics of your application design or implementation.</p>
<h1><a class="anchor" id="sec_unicode_support"></a>
How and Where Is UTF-8 Supported in HDF5?</h1>
<p>HDF5 uses characters in object names (which are actually link names, but that's a story for a different article), dataset raw data, attribute names, and attribute raw data. Though the mechanisms differ, you can use either ASCII or UTF-8 character sets in all of these situations.</p>
<h2><a class="anchor" id="subsec_unicode_support_names"></a>
Object and Attribute Names</h2>
<p>By default, HDF5 creates object and attribute names with ASCII character encoding. An object or attribute creation property list setting is required to create object names with UTF-8 characters. This uses the function <a class="el" href="group___a_c_p_l.html#gad4fa8e2d17236786f770cf17eef908cc" title="Sets the character encoding used to encode link and attribute names.">H5Pset_char_encoding</a>, which sets the character encoding used for object and attribute names.</p>
<p>For example, the following call sequence could be used to create a dataset with its name encoded with the UTF-8 character set:</p>
<div class="fragment"><div class="line">lcpl_id =    <a class="code hl_function" href="group___p_l_c_r.html#gaf1b11da01d4d45d788c45f8bc5f0cbfa">H5Pcreate</a>(<a class="code hl_define" href="_h5_ppublic_8h.html#ad2c1d10104f0262c826350ccbf7c49f2">H5P_LINK_CREATE</a>) ;</div>
<div class="line">error =      <a class="code hl_function" href="group___a_c_p_l.html#gad4fa8e2d17236786f770cf17eef908cc">H5Pset_char_encoding</a>(lcpl_id, <a class="code hl_enumvalue" href="_h5_tpublic_8h.html#a03755b8370672668ddc7063add28e71aa41685667f69bf81eb7de5dd5f452e658">H5T_CSET_UTF8</a>) ;</div>
<div class="line">dataset_id = <a class="code hl_function" href="group___h5_d.html#gabf62045119f4e9c512d87d77f2f992df">H5Dcreate2</a>(group_id, <span class="stringliteral">&quot;datos_Ã±&quot;</span>, datatype_id, dataspace_id, </div>
<div class="line">             lcpl_id, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>) ;               </div>
<div class="ttc" id="a_h5_ppublic_8h_html_ad2c1d10104f0262c826350ccbf7c49f2"><div class="ttname"><a href="_h5_ppublic_8h.html#ad2c1d10104f0262c826350ccbf7c49f2">H5P_LINK_CREATE</a></div><div class="ttdeci">#define H5P_LINK_CREATE</div><div class="ttdef"><b>Definition</b> H5Ppublic.h:116</div></div>
<div class="ttc" id="a_h5_ppublic_8h_html_afa85e97bfbf9bf1c58e39263846c568f"><div class="ttname"><a href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a></div><div class="ttdeci">#define H5P_DEFAULT</div><div class="ttdef"><b>Definition</b> H5Ppublic.h:220</div></div>
<div class="ttc" id="a_h5_tpublic_8h_html_a03755b8370672668ddc7063add28e71aa41685667f69bf81eb7de5dd5f452e658"><div class="ttname"><a href="_h5_tpublic_8h.html#a03755b8370672668ddc7063add28e71aa41685667f69bf81eb7de5dd5f452e658">H5T_CSET_UTF8</a></div><div class="ttdeci">@ H5T_CSET_UTF8</div><div class="ttdef"><b>Definition</b> H5Tpublic.h:97</div></div>
<div class="ttc" id="agroup___a_c_p_l_html_gad4fa8e2d17236786f770cf17eef908cc"><div class="ttname"><a href="group___a_c_p_l.html#gad4fa8e2d17236786f770cf17eef908cc">H5Pset_char_encoding</a></div><div class="ttdeci">herr_t H5Pset_char_encoding(hid_t plist_id, H5T_cset_t encoding)</div><div class="ttdoc">Sets the character encoding used to encode link and attribute names.</div></div>
<div class="ttc" id="agroup___h5_d_html_gabf62045119f4e9c512d87d77f2f992df"><div class="ttname"><a href="group___h5_d.html#gabf62045119f4e9c512d87d77f2f992df">H5Dcreate2</a></div><div class="ttdeci">hid_t H5Dcreate2(hid_t loc_id, const char *name, hid_t type_id, hid_t space_id, hid_t lcpl_id, hid_t dcpl_id, hid_t dapl_id)</div><div class="ttdoc">Creates a new dataset and links it into the file.</div></div>
<div class="ttc" id="agroup___p_l_c_r_html_gaf1b11da01d4d45d788c45f8bc5f0cbfa"><div class="ttname"><a href="group___p_l_c_r.html#gaf1b11da01d4d45d788c45f8bc5f0cbfa">H5Pcreate</a></div><div class="ttdeci">hid_t H5Pcreate(hid_t cls_id)</div><div class="ttdoc">Creates a new property list as an instance of a property list class.</div></div>
</div><!-- fragment --><p>If the character encoding of an attribute name is unknown, the combination of an <a class="el" href="group___h5_a.html#ga0f6b545850bd21f128904eff51df226d" title="Gets an attribute creation property list identifier.">H5Aget_create_plist</a> call and an <a class="el" href="group___a_c_p_l.html#ga9b35ef9add6463997330e9b4b606603d" title="Retrieves the character encoding used to create a link or attribute name.">H5Pget_char_encoding</a> call will reveal that information. If the character encoding of an object name is unknown, the information can be accessed through the object's H5L_info_t structure which can be obtained using <a class="el" href="group___t_r_a_v.html#gac0558936502924d9e898d8b6e041ed69">H5Lvisit</a> or <a class="el" href="group___h5_l.html#ga4db00b8b944eae68233438165c784b67">H5Lget_info_by_idx</a> calls.</p>
<h2><a class="anchor" id="subsec_unicode_support_char"></a>
Character Datatypes in Datasets and Attributes</h2>
<p>Like object names, HDF5 character data in datasets and attributes is encoded as ASCII by default. Setting up attribute or dataset character data to be UTF-8-encoded is accomplished while defining the attribute or dataset datatype. This makes use of the function <a class="el" href="group___a_t_o_m.html#ga4909c0c3d97c3d212fee032cc8dc031a" title="Sets character set to be used in a string or character datatype.">H5Tset_cset</a>, which sets the character encoding to be used in building a character datatype.</p>
<p>For example, the following commands could be used to create an 8-character, UTF-8 encoded, string datatype for use in either an attribute or dataset:</p>
<div class="fragment"><div class="line">datatype_id = <a class="code hl_function" href="group___h5_t.html#gaec07efbab84f4e5b4ed22f010786be8e">H5Tcopy</a>(<a class="code hl_define" href="group___p_d_t_s.html#ga7f6b6959fefe56d2e871659110936d2d">H5T_C_S1</a>);</div>
<div class="line">error =       <a class="code hl_function" href="group___a_t_o_m.html#ga4909c0c3d97c3d212fee032cc8dc031a">H5Tset_cset</a>(datatype_id, <a class="code hl_enumvalue" href="_h5_tpublic_8h.html#a03755b8370672668ddc7063add28e71aa41685667f69bf81eb7de5dd5f452e658">H5T_CSET_UTF8</a>);</div>
<div class="line">error =       <a class="code hl_function" href="group___h5_t.html#gae5f38bfd4a4c557496b3194b5180212c">H5Tset_size</a>(datatype_id, <span class="stringliteral">&quot;8&quot;</span>);</div>
<div class="ttc" id="agroup___a_t_o_m_html_ga4909c0c3d97c3d212fee032cc8dc031a"><div class="ttname"><a href="group___a_t_o_m.html#ga4909c0c3d97c3d212fee032cc8dc031a">H5Tset_cset</a></div><div class="ttdeci">herr_t H5Tset_cset(hid_t type_id, H5T_cset_t cset)</div><div class="ttdoc">Sets character set to be used in a string or character datatype.</div></div>
<div class="ttc" id="agroup___h5_t_html_gae5f38bfd4a4c557496b3194b5180212c"><div class="ttname"><a href="group___h5_t.html#gae5f38bfd4a4c557496b3194b5180212c">H5Tset_size</a></div><div class="ttdeci">herr_t H5Tset_size(hid_t type_id, size_t size)</div><div class="ttdoc">Sets size for a datatype.</div></div>
<div class="ttc" id="agroup___h5_t_html_gaec07efbab84f4e5b4ed22f010786be8e"><div class="ttname"><a href="group___h5_t.html#gaec07efbab84f4e5b4ed22f010786be8e">H5Tcopy</a></div><div class="ttdeci">hid_t H5Tcopy(hid_t type_id)</div><div class="ttdoc">Copies an existing datatype.</div></div>
<div class="ttc" id="agroup___p_d_t_s_html_ga7f6b6959fefe56d2e871659110936d2d"><div class="ttname"><a href="group___p_d_t_s.html#ga7f6b6959fefe56d2e871659110936d2d">H5T_C_S1</a></div><div class="ttdeci">#define H5T_C_S1</div><div class="ttdef"><b>Definition</b> H5Tpublic.h:646</div></div>
</div><!-- fragment --><p>If a character or string datatype's character encoding is unknown, the combination of an <a class="el" href="group___h5_a.html#ga0b070b714b2e535df2e1cb3005026a44" title="Gets an attribute&#39;s datatype.">H5Aget_type</a> or <a class="el" href="group___h5_d.html#ga7cd04b8332e8a0939b9973fbc500cadb" title="Returns an identifier for a copy of the datatype for a dataset.">H5Dget_type</a> call and an <a class="el" href="group___a_t_o_m.html#ga5bc2f3e8f708f5bcdd0d8667950310c1" title="Retrieves the character set type of a string datatype.">H5Tget_cset</a> call can be used to determine that.</p>
<h1><a class="anchor" id="sec_unicode_warn"></a>
Caveats, Pitfalls, and Things to Watch For</h1>
<p>Programmers who are accustomed to using ASCII text without accommodating other text encodings will have to be aware of certain common issues as they begin using UTF-8 encodings.</p>
<h2><a class="anchor" id="subsec_unicode_warn_port"></a>
Cross-platform Portability</h2>
<p>Since the HDF5 Library handles datatypes directly, UTF-8 encoded text in dataset and attribute datatypes in a well-designed HDF5 application and file should work transparently across platforms. The same should be true of handling names of groups, datasets, committed datatypes, and attributes within a file.</p>
<p>Be aware, however, of system or application limitations once data or other information has been extracted from an HDF5 file. The application or system must be designed to accommodate UTF-8 encodings if the information is then used elsewhere in the application or system environment.</p>
<p>Data from a UTF-8 encoded HDF5 datatype, in either a dataset or an attribute, that has been established within an HDF5 application should "just work" within the HDF5 portions of the application.</p>
<h2><a class="anchor" id="subsec_unicode_warn_names"></a>
Filenames</h2>
<p>Since file access is a system issue, filenames do not fall within the scope of HDF5's UTF-8 capabilities; filenames are encoded at the system level.</p>
<p>Linux and Mac OS systems normally handle UTF-8 encoded filenames correctly while Windows systems generally do not.</p>
<h1><a class="anchor" id="sec_unicode_text"></a>
The &lt;em&gt;Plain Text&lt;/em&gt; Illusion</h1>
<p>Beware the use of the term <em>plain text</em>. <em>Plain text</em> is at best ambiguous, but often misleading. Many will assume that <em>plain text</em> means ASCII, but plain text German or French, for example, cannot be represented in ASCII. Plain text is only unambiguous in the context of English (and even then can be problematic!).</p>
<h2><a class="anchor" id="subsec_unicode_warn_store"></a>
Storage Size</h2>
<p>Programmers and data users accustomed to working strictly with ASCII data generally make the reasonable assumption that 1 character, be it in an object name or in data, requires 1 byte of storage. This equation does not work when using UTF-8 or any other Unicode encoding. With Unicode encoding, number of characters is not synonymous with number of bytes. One must get used to thinking in terms of number of characters when talking about content, reserving number of bytes for discussions of storage size.</p>
<p>When working with Unicode text, one can no longer assume a 1:1 correspondence between the number of characters and the data storage requirement.</p>
<h2><a class="anchor" id="subsec_unicode_warn_sys"></a>
System Dependencies</h2>
<p><b>Linux</b>, <b>Unix</b>, and similar systems generally handle UTF-8 encodings in correct and predictable ways. There is an apparent consensus in the Linux community that "UTF-8 is just the right way to go."</p>
<p><b>Mac OS</b> systems generally handle UTF-8 encodings correctly.</p>
<p><b>Windows</b> systems use a different Unicode encoding, <a href="https://en.wikipedia.org/wiki/UTF-16">UCS-2</a> (discussed in this UTF-16 article) at the system level. Within an HDF5 file and application on a Windows system, UTF-8 encoding should work correctly and as expected. Problems may arise, however, when that UTF-8 encoding is exposed directly to the Windows system. For example: </p><ul>
<li>File open and close calls on files with UTF-8 encoded names are likely to fail as the HDF5 open and close operations interact directly with the Windows file system interface. </li>
<li>Anytime an HDF5 command-line utility (<a class="el" href="_h5_t_o_o_l__l_s__u_g.html">The HDF5 h5ls Tool</a> or <a class="el" href="_h5_t_o_o_l__d_p__u_g.html">The HDF5 h5dump Tool</a>, for example) emits text output, the Windows system must interpret the character encodings. If that output is UTF-8 encoded, Windows will correctly interpret only those characters in the ASCII subset of UTF-8.</li>
</ul>
<h1><a class="anchor" id="sec_unicode_common"></a>
Common Characters in UTF-8 and ASCII</h1>
<p>One interesting feature of UTF-8 and ASCII is that the ASCII character set is a discrete subset of the UTF-8 character set. And where they overlap, the encodings are identical. This means that a character string consisting entirely of members of the ASCII character set can be encoded in either ASCII or UTF-8, the two encodings will be indistinguishable, and the encodings will require exactly the same storage space.</p>
<h1><a class="anchor" id="sec_unicode_also"></a>
See Also</h1>
<ul>
<li>For object and attribute names: <a class="el" href="group___a_c_p_l.html#gad4fa8e2d17236786f770cf17eef908cc" title="Sets the character encoding used to encode link and attribute names.">H5Pset_char_encoding</a> <a class="el" href="group___a_c_p_l.html#ga9b35ef9add6463997330e9b4b606603d" title="Retrieves the character encoding used to create a link or attribute name.">H5Pget_char_encoding</a></li>
<li>For dataset and attribute datatypes: <a class="el" href="group___a_t_o_m.html#ga4909c0c3d97c3d212fee032cc8dc031a" title="Sets character set to be used in a string or character datatype.">H5Tset_cset</a> <a class="el" href="group___a_t_o_m.html#ga5bc2f3e8f708f5bcdd0d8667950310c1" title="Retrieves the character set type of a string datatype.">H5Tget_cset</a></li>
<li><a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8 article on Wikipedia</a></li>
</ul>
<h3>NOTES</h3>
<ol type="1">
<li>UTF-8 is the only Unicode standard encoding supported in HDF5.</li>
</ol>
<hr  />
<p> Navigate back: <a class="el" href="index.html">Main</a> / <a class="el" href="_t_n.html">Technical Notes</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
